/*
 * Arethusa - a backend-independent client-side annotation framework
 * http://github.com/alpheios-project/arethusa
 *
 * Version 0.2.5
 * built from branch widget
 * at 0a82a2ad9cc7468ea781bfa023a1dddbd77130c6
 * on 2020-12-07T15:20:56.224Z
 *
 * Published under the MIT license
 */

"use strict";angular.module("arethusa.hebrewMorph",[]),angular.module("arethusa.hebrewMorph").service("hebrewMorph",["state","configurator",function(a,b){function c(){var a=["styledThrough","parts","attributes"];b.getConfAndDelegate(k,a)}function d(a,b){this.id=a,this.score=b}function e(a){this.string=a,this.forms=[]}function f(a){var b=a.prefix,c={};return b&&(c.string=b._surface),c}function g(a,b,c){var d=a.suffix,e={};return d&&(e.string=h(b,c)),e}function h(a,b){var c;return c=b.replace(a.prefix.string||"",""),c=c.replace(a.base.string||"","")}function i(a){var b=a.base,c={};return b&&(c.string=b._lexiconItem,c.pos=Object.keys(b)[0]),c}function j(){angular.forEach(a.tokens,function(b,c){var d=b.morphology;a.setStyle(c,k.styleOf(d.forms[0]))})}var k=this;this.name="hebrewMorph",c(),this.styleOf=function(a){var b=k.styledThrough,c=a.base[b];return(k.attributes[b].values[c]||{}).style||{}},this.hyphenatedForm=function(a){return arethusaUtil.inject([],k.parts,function(b,c){var d=a[c].string;d&&b.push(d)}).join(" - ")},this.parse=function(a,b){var c=new e(b.string),h=[];b.morphology=c;var j=arethusaUtil.toAry(a.analysis);angular.forEach(j,function(a,c){var e=new d(a._id,a._score);e.base=i(a),e.prefix=f(a),e.suffix=g(a,e,b.string),h.push(e)}),arethusaUtil.pushAll(c.forms,h.sort(function(a,b){return a.score<b.score}))},this.currentSelection=function(){return arethusaUtil.inject({},a.selectedTokens,function(b,c,d){b[c]=a.getToken(c).morphology})},this.init=function(){c(),j()}}]),angular.module("arethusa.hebrewMorph").run(["$templateCache",function(a){a.put("js/arethusa.hebrew_morph/templates/hebrew_morph.html",'<div ng-repeat="(id, analysis) in plugin.currentSelection()">\n  <div class="small-12 columns" lang-specific>\n    <p token-with-id value="analysis.string" token-id="id"/>\n    <accordion close-others="oneAtATime">\n      <accordion-group ng-repeat="form in analysis.forms">\n        <accordion-heading class="text">\n          <span class="right" ng-style="plugin.styleOf(form)">\n            {{ plugin.hyphenatedForm(form) }}\n          </span>\n          <span class="left">{{ form.score }}</span>\n          <hr class="small">\n        </accordion-heading>\n      </accordion-group>\n    </accordion>\n  </div>\n</div>\n')}]);
//# sourceMappingURL=arethusa.hebrew_morph.min.map